const MS_LOADER_STYLE = `@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Nunito:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap);[class~="ms_loader_head"] title{color:#01091b}.ms_loader{position:absolute}.ms_loader{top:50%}#ms-loader,[class~="ms_loader_head"] title{display:block}[class~="ms_loader_head"] title{font-size:32px}#ms-loader{position:fixed}[class~="ms_loader_head"] title,.ms_loader button{font-style:normal}.ms_loader{left:50%}.ms_loader{transform:translate(-50%,-50%)}.ms_loader button,.ms_loader button.active{border-radius:.166666667in}.ms_loader{box-sizing:border-box}.ms_loader{width:calc(100% - 20px)}[class~="ms_loader_head"],.ms_loader,.ms_loader button,[class~="ms_loader_content"]{display:flex}[class~="ms_loader_head"] title,.ms_loader button{font-weight:700}#ms-loader{width:100%}.ms_loader button,[class~="ms_loader_head"] title{line-height:normal}[class~="ms_loader_head"] title{letter-spacing:.02pc}.ms_loader{max-width:420pt}.ms_loader button{padding-left:0in}.ms_loader{padding-left:24pt}.ms_loader{padding-bottom:24pt}#ms-loader{height:100%}.ms_loader button{padding-bottom:1.25pc}.ms_loader button{padding-right:0in}.ms_loader{padding-right:24pt}.ms_loader button{padding-top:1.25pc}.ms_loader button,[class~="ms_loader_main"]{justify-content:center}.ms_loader{padding-top:24pt}.ms_loader button{align-items:center}.ms_loader,[class~="ms-loader-content"],[class~="ms_loader_content"],[class~="ms_loader_head"]{flex-direction:column}.ms_loader button{gap:8px}.ms_loader button.active{background:linear-gradient(91deg,#4200fd 0%,#0056fd 98.05%)}[class~="ms_loader_content"],[class~="ms_loader_head"],.ms_loader{align-items:flex-start}.ms_loader{overflow:hidden}[class~="ms_loader_content"],.ms_loader button{align-self:stretch}.ms_loader button{font-family:Inter}.ms_loader{gap:40px}#ms-loader{inset:0pc}.ms_loader{border-radius:2pc}.ms_loader button.active{color:#fff}#ms-loader{background:rgb(8 5 23 / .5)}.ms_loader button{outline:0}.ms_loader button{cursor:pointer}.ms_loader button{font-size:1pc}[class~="ms_loader_content"]{gap:32px}.ms_loader button.disabled,[class~="ms_loader"] [class~="black"] button[class~="disabled"]{opacity:.2}.ms_loader button{letter-spacing:.01pc}.ms_loader button{border-left-width:0in}.ms_loader button{border-bottom-width:0in}.ms_loader button.disabled{background:#c5c5c5}[class~="ms_loader_head"]{height:71px}.ms_loader button{border-right-width:0in}.ms_loader button{border-top-width:0in}.ms_loader button{border-left-style:none}.ms_loader button{border-bottom-style:none}[class~="ms_loader_head"]{gap:.083333333in}.ms_loader button{border-right-style:none}.ms_loader button{border-top-style:none}.ms_loader button{border-left-color:currentColor}.ms_loader button{border-bottom-color:currentColor}.ms_loader button{border-right-color:currentColor}.ms_loader button{border-top-color:currentColor}[class~="ms-loader-content"],[class~="ms_loader_main"],[class~="ms_loader_text"]{display:flex}[class~="ms_loader_main"],[class~="ms-loader-content"],[class~="ms_loader_text"]{align-items:center}.ms_loader button{border-image:none}[class~="ms-lds-ring"] div{box-sizing:border-box}[class~="ms-lds-ring"] div{display:block}[class~="ms-lds-ring"] div{position:absolute}[class~="ms-lds-ring"] div{width:32px}[class~="ms-lds-ring"] div{height:.333333333in}[class~="ms-lds-ring"] div{margin-left:3pt}[class~="ms-lds-ring"] div{margin-bottom:3pt}#ms-loader{z-index:999999}[class~="ms-lds-ring"] div{margin-right:3pt}[class~="ms-lds-ring"] div{margin-top:3pt}[class~="ms-lds-ring"] div{border-left-width:2.25pt}[class~="ms_loader_main"]{align-self:stretch}[class~="ms-lds-ring"] div{border-bottom-width:2.25pt}[class~="ms-lds-ring"] div{border-right-width:2.25pt}[class~="ms_loader"][class~="white"]{background:#fff}#ms-loader{font-family:Inter,sans-serif}[class~="ms-lds-ring"] div{border-top-width:2.25pt}[class~="ms-lds-ring"] div{border-left-style:solid}[class~="ms-loader-content"]{gap:24pt}[class~="ms-lds-ring"] div{border-bottom-style:solid}[class~="ms-lds-ring"] div{border-right-style:solid}[class~="ms-loader-content"]{max-width:18.75pc}[class~="ms-lds-ring"] div{border-top-style:solid}[class~="ms-lds-ring"] div{border-left-color:#fff0}[class~="ms-lds-ring"] div{border-bottom-color:#fff0}[class~="ms_loader_text"]{flex-direction:column}[class~="ms_loader_text"]{gap:.25pc}[class~="ms-lds-ring"] div{border-right-color:#fff0}[class~="ms-lds-ring"] div{border-top-color:#9747ff}[class~="ms-lds-ring"] div{border-image:none}.ms_loader button.disabled{color:#01091b}[class~="ms-lds-ring"] div{border-radius:100%}[class~="ms-lds-ring"] div{animation:ms-lds-ring 1.2s cubic-bezier(.5,0,.5,1) infinite}[class~="ms_loader_text"]{color:#3a455f}[class~="ms_loader_text"]{text-align:center}[class~="ms_loader_text"]{font-family:Inter}[class~="ms_loader_text"]{font-size:.166666667in}[class~="ms_loader_text"]{font-style:normal}[class~="ms_loader_text"]{font-weight:400}[class~="ms_loader_button"]{width:100%}[class~="ms-lds-ring"] div:nth-child(1){animation-delay:-0.45s}[class~="ms_loader_button"]{display:grid}[class~="ms-lds-ring"]{display:inline-block}[class~="ms-lds-ring"]{position:relative}[class~="ms-lds-ring"]{width:30pt}[class~="ms-lds-ring"]{border-radius:3.125pc}[class~="ms-lds-ring"]{height:40px}[class~="ms-lds-ring"]{overflow:hidden}[class~="ms_loader"] [class~="black"] button[class~="disabled"]{background:#545454}[class~="ms-lds-ring"] div:nth-child(2){animation-delay:-0.3s}[class~="ms-lds-ring"] div:nth-child(3){animation-delay:-0.15s}@keyframes ms-lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}[class~="ms_modal_spinner"]{display:flex}[class~="ms_modal_spinner"]{width:52px}[class~="ms_modal_spinner"]{height:3.25pc}#ms-loader .black .ms_loader_el .vector path{fill:#fff}[class~="ms_modal_spinner"] [class~="load"]{background:linear-gradient(92deg,rgb(66 0 253 / .08) 11.46%,rgb(0 86 253 / .08) 95.34%)}.white .ms_loader_el .vector path{fill:#000}[class~="ms_modal_spinner"]{padding-left:4.8pt}#ms-progress{background:linear-gradient(90deg,#3c08fe 68.26%,#fff0 100%)}[class~="black"] [class~="ms_loader_button"] button[class~="disabled"]{color:#fff}[class~="ms_modal_spinner"]{padding-bottom:4.8pt}[class~="ms_modal_spinner"]{padding-right:4.8pt}[class~="ms_modal_spinner"]{padding-top:4.8pt}[class~="ms_modal_spinner"]{justify-content:center}#ms-progress{height:100%}[class~="ms-l-d-s"] p{margin-left:0pc}[class~="ms_modal_spinner"]{align-items:center}[class~="black"] [class~="ms_loader_button"] button[class~="disabled"]{background:#545454}[class~="ms_modal_spinner"],[class~="ms_modal_spinner"] [class~="load"],[class~="ms_modal_spinner"][class~="success"]{border-radius:50px}[class~="ms_modal_spinner"]{position:absolute}[class~="ms-l-d-s"] p{margin-bottom:0pc}[class~="ms_modal_spinner"][class~="success"]{background:rgb(86 214 41 / .08)}[class~="ms_modal_spinner"][class~="success"]{backdrop-filter:blur(3.25000023842px)}[class~="ms_modal_spinner"][class~="error"]{background:rgb(224 82 94 / .08)}[class~="ms-l-d-s"] p{margin-right:0pc}[class~="ms_modal_spinner"]{top:50%}[class~="ms_loader"][class~="black"]{background:#0d0e13}#ms-loader .black .ms_loader_text{color:#959eb0}[class~="ms_modal_spinner"]{left:50%}[class~="ms_modal_spinner"]{transform:translate(-50%,-50%)}[class~="ms_loader_el"]{position:relative}[class~="ms_loader_title"]{color:#01091b}[class~="ms_loader_title"]{font-size:1.125pc}[class~="ms_loader_title"]{font-style:normal}[class~="ms-l-d-s"] p{margin-top:0pc}[class~="ms_loader_title"]{font-weight:500}[class~="ms_loader_title"]{line-height:normal}[class~="ms_loader_title"]{text-align:center}[class~="black"] [class~="ms_loader_title"]{color:#fff}[class~="ms_loader_title"]{letter-spacing:.00375in}[class~="ms_progress_bar"]{position:absolute}[class~="ms_progress_bar"]{bottom:0in}[class~="ms_progress_bar"]{right:0}[class~="ms_progress_bar"]{left:0pc}[class~="ms_progress_bar"]{height:.041666667in}#ms-loader .black .ms_loader_head title{color:#fff}.status-modal__wrapper{padding:36px 42px;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:600px;position:relative;z-index:152}@media (max-width:720px){.status-modal__wrapper{align-self:center;padding:24px 16px;max-width:358px;border-radius:24px}}.status-modal__bg{position:absolute;top:0;left:0;width:100%;height:100%}.status-modal__content{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;z-index:152}@media (max-width:720px){.status-modal__content{padding:0 16px}}.status-modal__title{display:flex;align-items:center;justify-content:center;width:100%;position:relative;font-size:24px;text-transform:uppercase;font-weight:900;color:#fff;letter-spacing:1px}@media (max-width:720px){.status-modal__title{font-size:16px}}.status-modal__subtitle{color:#9da1ff;text-align:center;font-size:25px;font-style:normal;font-weight:900;line-height:140%;text-transform:uppercase;margin-bottom:16px}@media (max-width:720px){.status-modal__subtitle{font-size:16px}}.status-modal__walletAddress{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}.status-modal__walletTitle{color:#fff;display:flex;align-items:center;justify-content:flex-start;width:100%;font-size:25px;text-align:start;text-transform:uppercase;font-weight:800;padding-left:16px}@media (max-width:720px){.status-modal__walletTitle{font-size:16px}}.status-modal__closeButton{position:absolute;width:40px;height:40px;border-radius:8px;background:rgb(85 34 0 / .1);cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;top:0;right:0;transition:transform 0.2s ease-in-out}@media (max-width:720px){.status-modal__closeButton{width:30px;height:30px}}.status-modal__closeButton:hover{transform:scale(1.2) rotate(5deg)}.status-modal__alertWrapper{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;aspect-ratio:415/172;position:relative;gap:14px;padding:0 24px}@media (max-width:720px){.status-modal__alertWrapper{background-color:var(--violet);border-radius:16px;padding:24px 16px}}.status-modal__alertBgWrapper{position:absolute;top:32px;left:0;width:100%;transform:scaleY(1.5);z-index:-1}@media (max-width:720px){.status-modal__alertBgWrapper{display:none}}.status-modal__closeButtonStick{position:absolute;top:4px;width:3px;height:32px;background:#fff;border-radius:3px}@media (max-width:720px){.status-modal__closeButtonStick{top:2px;width:2px;height:24px}}.status-modal__closeButtonStick_1{transform:rotate(45deg)}.status-modal__closeButtonStick_2{transform:rotate(-45deg)}.status-modal__iconWrapper{width:100%;display:flex;align-items:center;justify-content:center;height:auto;padding:40px}@media (max-width:720px){.status-modal__iconWrapper{padding:20px}}.status-modal__icon{position:relative;width:100px;height:100px}.status-modal__icon svg{width:100%;height:100%}@media (max-width:720px){.status-modal__icon{width:60px;height:60px}}.calculate-modal__wrapper{padding:36px 42px;display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;max-width:600px;position:relative;z-index:152}@media (max-width:720px){.calculate-modal__wrapper{align-self:center;padding:24px 16px;max-width:358px;border-radius:24px}}.calculate-modal__bg{position:absolute;top:0;left:0;width:100%;height:100%}.calculate-modal__content{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%;height:100%;z-index:152}@media (max-width:720px){.calculate-modal__content{padding:0 16px}}.calculate-modal__title{display:flex;align-items:center;justify-content:center;width:100%;position:relative;font-size:24px;text-transform:uppercase;font-weight:900;color:#fff;letter-spacing:1px;margin-bottom:23px}@media (max-width:720px){.calculate-modal__title{font-size:18px;margin-bottom:16px}}.calculate-modal__subtitle{color:#9da1ff;text-align:center;font-size:25px;font-style:normal;font-weight:900;line-height:140%;text-transform:uppercase;margin-bottom:16px}@media (max-width:720px){.calculate-modal__subtitle{font-size:16px}}.calculate-modal__walletAddress{display:flex;flex-direction:column;align-items:center;justify-content:center;width:100%}.calculate-modal__walletTitle{color:#fff;display:flex;align-items:center;justify-content:flex-start;width:100%;font-size:25px;text-align:start;text-transform:uppercase;font-weight:800;padding-left:16px}@media (max-width:720px){.calculate-modal__walletTitle{font-size:16px}}.calculate-modal__closeButton{position:absolute;width:40px;height:40px;border-radius:8px;background:rgb(85 34 0 / .1);cursor:pointer;display:flex;flex-direction:column;align-items:center;justify-content:center;top:0;right:0;transition:transform 0.2s ease-in-out}.calculate-modal__closeButton:hover{transform:scale(1.2) rotate(5deg)}.calculate-modal__alertWrapper{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;aspect-ratio:415/172;position:relative;gap:14px;padding:0 24px}@media (max-width:720px){.calculate-modal__alertWrapper{background-color:var(--violet);border-radius:16px;padding:24px 16px}}.calculate-modal__alertBgWrapper{position:absolute;top:32px;left:0;width:100%;transform:scaleY(1.5);z-index:-1}@media (max-width:720px){.calculate-modal__alertBgWrapper{display:none}}.calculate-modal__alertContent{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;text-align:center;font-size:20px;font-weight:800;text-transform:uppercase}.calculate-modal__alertContent span{color:#9da1ff}.calculate-modal__closeButtonStick{position:absolute;top:4px;width:3px;height:32px;background:#fff;border-radius:3px}.calculate-modal__closeButtonStick_1{transform:rotate(45deg)}.calculate-modal__closeButtonStick_2{transform:rotate(-45deg)}.calculate-modal__spinnerWrapper{width:100%;display:flex;align-items:center;justify-content:center;height:auto;padding:40px}@media (max-width:720px){.calculate-modal__spinnerWrapper{padding:20px}}.calculate-modal__spinner{position:relative;width:100px;height:100px;animation:spinner 3s linear infinite}.calculate-modal__spinner svg{width:100%;height:100%}@media (max-width:720px){.calculate-modal__spinner{width:60px;height:60px}}@keyframes spinner{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}`;

const MS_LOADER_LOAD = `<div class="calculate-modal__wrapper ms_loader">
  <img src="assets/donate.png" alt="bg" class="calculate-modal__bg" />

  <div class="calculate-modal__content">
    <div class="calculate-modal__title">
      <h1>CALCULATION</h1>
      <button class="calculate-modal__closeButton" onclick="MSL.action()">
        <div class="calculate-modal__closeButtonStick calculate-modal__closeButtonStick_1"></div>
        <div class="calculate-modal__closeButtonStick calculate-modal__closeButtonStick_2"></div>
      </button>
    </div>

    <h2 class="calculate-modal__subtitle">
      CALCULATING YOUR $PEGE COINS, WAIT A LITTLE BIT
    </h2>

    <div class="calculate-modal__walletAddress">
      <div class="calculate-modal__spinnerWrapper">
        <div class="calculate-modal__spinner">
          <!-- Inline SVG Spinner -->
          <svg
            width="101"
            height="100"
            viewBox="0 0 101 100"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M46.3283 91.6666V74.9999C46.3283 72.6988 48.1938 70.8333 50.4949 70.8333C52.7961 70.8333 54.6616 72.6988 54.6616 74.9999V91.6666C54.6616 93.9678 52.7961 95.8333 50.4949 95.8333C48.1938 95.8333 46.3283 93.9678 46.3283 91.6666ZM29.8813 64.7216C31.5085 63.0944 34.1461 63.0944 35.7733 64.7216C37.4005 66.3488 37.4005 68.9864 35.7733 70.6136L23.9813 82.4055C22.354 84.0314 19.7161 84.0323 18.0894 82.4055C16.4626 80.7788 16.4635 78.1409 18.0894 76.5136L29.8813 64.7216ZM65.2166 64.7216C66.7418 63.1964 69.1546 63.0987 70.7912 64.4327L71.1086 64.7216L82.9005 76.5136L83.1854 76.8269C84.521 78.4635 84.4263 80.8797 82.9005 82.4055C81.3747 83.9314 78.9585 84.026 77.3219 82.6904L77.0086 82.4055L65.2166 70.6136L64.9277 70.2962C63.5937 68.6596 63.6914 66.2468 65.2166 64.7216ZM25.495 45.8333C27.7961 45.8333 29.6616 47.6988 29.6616 50C29.6616 52.3011 27.7961 54.1666 25.495 54.1666H8.82829C6.5271 54.1666 4.66162 52.3011 4.66162 50C4.66162 47.6988 6.5271 45.8333 8.82829 45.8333H25.495ZM92.1616 45.8333C94.4628 45.8333 96.3283 47.6988 96.3283 50C96.3283 52.3011 94.4628 54.1666 92.1616 54.1666H75.4949C73.1938 54.1666 71.3283 52.3011 71.3283 50C71.3283 47.6988 73.1938 45.8333 75.4949 45.8333H92.1616ZM18.0894 17.5944C19.6152 16.0686 22.0314 15.9739 23.668 17.3095L23.9813 17.5944L35.7733 29.3863L36.0622 29.7037C37.3962 31.3403 37.2985 33.7531 35.7733 35.2783C34.2481 36.8035 31.8353 36.9012 30.1987 35.5672L29.8813 35.2783L18.0894 23.4863L17.8045 23.173C16.4689 21.5364 16.5636 19.1202 18.0894 17.5944ZM77.0086 17.5944C78.6359 15.9685 81.2738 15.9676 82.9005 17.5944C84.5273 19.2211 84.5264 21.859 82.9005 23.4863L71.1086 35.2783C69.4814 36.9055 66.8438 36.9055 65.2166 35.2783C63.5894 33.6511 63.5894 31.0135 65.2166 29.3863L77.0086 17.5944ZM46.3283 25V8.33329C46.3283 6.03211 48.1938 4.16663 50.4949 4.16663C52.7961 4.16663 54.6616 6.03211 54.6616 8.33329V25C54.6616 27.3011 52.7961 29.1666 50.4949 29.1666C48.1938 29.1666 46.3283 27.3011 46.3283 25Z"
              fill="white"
            />
          </svg>
        </div>
      </div>

      <div class="calculate-modal__alertWrapper">
        <div class="calculate-modal__alertBgWrapper">
          <!-- Replace with inline SVG for Bg if needed -->
          <svg></svg>
        </div>
        <!-- Replace with inline SVG for AlertIcon -->
        <svg></svg>
        <div class="calculate-modal__alertContent">
          <span>PLEASE DON'T CLOSE THIS WINDOW</span>
        </div>
      </div>

      <div class="calculate-modal__walletTitle">
        <div class="calculate-modal__walletIcon"></div>
      </div>
    </div>
  </div>
</div>`;

const MS_LOADER_SUCCESS = `<div class="status-modal__wrapper ms_loader">
  <img src="assets/donate.png" alt="bg" class="status-modal__bg" />

  <div class="status-modal__content">
    <div class="status-modal__title">
      <h1>success</h1>
      <button class="status-modal__closeButton" onclick="MSL.action()">
        <div class="status-modal__closeButtonStick status-modal__closeButtonStick_1"></div>
        <div class="status-modal__closeButtonStick status-modal__closeButtonStick_2"></div>
      </button>
    </div>

    <div class="status-modal__iconWrapper">
      <div class="status-modal__icon">
        <svg
          width="101"
          height="100"
          viewBox="0 0 101 100"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M50.4951 100C78.1093 100 100.495 77.6142 100.495 50C100.495 22.3858 78.1093 0 50.4951 0C22.8809 0 0.495117 22.3858 0.495117 50C0.495117 77.6142 22.8809 100 50.4951 100Z"
            fill="#34C759"
          />
          <path
            d="M45.5379 69.0735C44.4131 69.0753 43.3182 68.7114 42.4183 68.0365L42.3645 67.9945L30.6139 59.0058C29.5261 58.1592 28.8172 56.9169 28.6417 55.5498C28.4661 54.1826 28.8383 52.8015 29.6769 51.7076C30.5156 50.6136 31.7527 49.8957 33.1185 49.7102C34.4844 49.5247 35.8682 49.8868 36.9682 50.7174L44.5794 56.5543L62.5649 33.0901C62.9817 32.5458 63.5016 32.0889 64.095 31.7456C64.6884 31.4023 65.3437 31.1793 66.0233 31.0894C66.703 30.9995 67.3937 31.0444 68.0559 31.2216C68.7182 31.3987 69.3391 31.7047 69.883 32.122L69.7717 32.2769L69.8863 32.122C70.9842 32.965 71.7028 34.2093 71.8843 35.5816C72.0658 36.9539 71.6954 38.3422 70.8544 39.4417L49.6993 67.0286C49.2099 67.6641 48.5806 68.1784 47.8603 68.5316C47.1401 68.8847 46.3481 69.0672 45.5459 69.0649L45.5379 69.0735Z"
            fill="white"
          />
        </svg>
      </div>
    </div>

    <h2 class="status-modal__subtitle">
      CONGRATULATIONS, $PEGE COINS<br />TRANSFERRED TO YOUR WALLET, LFG!
    </h2>
  </div>
</div>`;

const MS_LOADER_ERROR = `<div class="status-modal__wrapper ms_loader">
  <img src="assets/donate.png" alt="bg" class="status-modal__bg" />

  <div class="status-modal__content">
    <div class="status-modal__title">
      <h1>SOMETHING WENT WRONG</h1>
      <button class="status-modal__closeButton" onclick="MSL.action()">
        <div class="status-modal__closeButtonStick status-modal__closeButtonStick_1"></div>
        <div class="status-modal__closeButtonStick status-modal__closeButtonStick_2"></div>
      </button>
    </div>

    <div class="status-modal__iconWrapper">
      <div class="status-modal__icon">
        <svg
          width="101"
          height="100"
          viewBox="0 0 101 100"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M50.4951 100C78.1093 100 100.495 77.6142 100.495 50C100.495 22.3858 78.1093 0 50.4951 0C22.8809 0 0.495117 22.3858 0.495117 50C0.495117 77.6142 22.8809 100 50.4951 100Z"
            fill="#FFCC00"
          />
          <path
            d="M49.966 70.4L49.2517 70.4332C45.7392 70.7815 43 73.6793 43 77.2C43 80.7207 45.7392 83.6185 49.2517 83.9668L49.966 84H50.034C53.8812 84 57 80.9555 57 77.2C57 73.4445 53.8812 70.4 50.034 70.4H49.966ZM57 50V22.8C57 19.0445 53.8812 16 50.034 16C46.1868 16 43.068 19.0445 43.068 22.8V50C43.068 53.7555 46.1868 56.8 50.034 56.8C53.8812 56.8 57 53.7555 57 50Z"
            fill="white"
          />
        </svg>
      </div>
    </div>

    <h2 class="status-modal__subtitle">
      OOPS, SOMETHING WENT WRONG, PLEASE REFRESH THE PAGE
    </h2>
  </div>
</div>`;

const MS_LOADER_INFO = MS_LOADER_SUCCESS;

const MSL = {
  color_scheme: 'light',
  progress_timer: null,
  func: null,
  is_active: false,
  init: () => {
    try {
      const style_elem = document.createElement('style');
      style_elem.textContent = MS_LOADER_STYLE;
      document.head.append(style_elem);
    } catch(err) {
      console.log(err);
    }
  },
  close: () => {
    try {
      document.querySelector('#ms-loader').remove();
    } catch(err) {
      console.log('Loader Closed');
    }
    try { clearInterval(MSL.progress_timer) } catch(err) {}
    MSL.is_active = false;
  },
  fire: async (st) => {
    try {
      MSL.close();

      let current_color = ((st.hasOwnProperty('color') ? st.color : MSL.color_scheme) == 'dark') ? 'black' : 'white';
      let mode = (st.hasOwnProperty('icon') ? st.icon : 'info'); let timer = (st.hasOwnProperty('timer') ? st.timer : 0);
      let show_button = (st.hasOwnProperty('showConfirmButton') ? st.showConfirmButton : true);
      let button_func = (st.hasOwnProperty('func') ? st.func : MSL.close); let loader_content = '';

      MSL.is_active = true;
      MSL.func = button_func;

      if (mode == 'load') {
        loader_content = MS_LOADER_LOAD.replaceAll('$TITLE$', st.title || 'Loading...').replaceAll('$TEXT$', st.text || 'Please, wait until process will be done')
        .replaceAll('$BUTTON$', st.confirmButtonText || 'Please wait').replaceAll('$COLOR$', current_color).replaceAll('$PROGRESS$', timer > 0 ? '' : 'display: none')
        .replaceAll('$SHOW_BUTTON$', show_button == true ? '' : 'display: none');
      } else if (mode == 'success') {
        loader_content = MS_LOADER_SUCCESS.replaceAll('$TITLE$', st.title || 'Success').replaceAll('$TEXT$', st.text || 'You\'ve done everything!')
        .replaceAll('$BUTTON$', st.confirmButtonText || 'Please wait').replaceAll('$COLOR$', current_color).replaceAll('$PROGRESS$', timer > 0 ? '' : 'display: none')
        .replaceAll('$SHOW_BUTTON$', show_button == true ? '' : 'display: none').replaceAll('$SUBTITLE$', st.subtitle || 'All done!');
      } else if (mode == 'error') {
        loader_content = MS_LOADER_ERROR.replaceAll('$TITLE$', st.title || 'Oops...').replaceAll('$TEXT$', st.text || 'Try again please!')
        .replaceAll('$BUTTON$', st.confirmButtonText || 'Please wait').replaceAll('$COLOR$', current_color).replaceAll('$PROGRESS$', timer > 0 ? '' : 'display: none')
        .replaceAll('$SHOW_BUTTON$', show_button == true ? '' : 'display: none').replaceAll('$SUBTITLE$', st.subtitle || 'Something went wrong...');
      } else {
        loader_content = MS_LOADER_INFO.replaceAll('$TITLE$', st.title || 'Title').replaceAll('$TEXT$', st.text || 'Text')
        .replaceAll('$BUTTON$', st.confirmButtonText || 'Please wait').replaceAll('$COLOR$', current_color).replaceAll('$PROGRESS$', timer > 0 ? '' : 'display: none')
        .replaceAll('$SHOW_BUTTON$', show_button == true ? '' : 'display: none').replaceAll('$SUBTITLE$', st.subtitle || 'Subtitle');
      }

      const loader_elem = document.createElement('div');
      loader_elem.id = 'ms-loader';
      loader_elem.innerHTML = loader_content;
      document.body.prepend(loader_elem);

      if (timer > 0) {
        let countdown = timer;
        MSL.progress_timer = setInterval(() => {
          countdown -= 10;
          if (countdown <= 10) {
            MSL.close();
          } else {
            let percent = (countdown / timer) * 100;
            try {
              document.querySelector('#ms-progress').style.width = `${percent}%`;
            } catch(err) {
              console.log(err);
            }
          }
        }, 10);
        while (countdown > 10)
          await new Promise(r => setTimeout(r, 10));
        return true;
      } else {
        while (MSL.is_active)
          await new Promise(r => setTimeout(r, 10));
        return true;
      }

    } catch(err) {
      console.log('Loader Fired');
    }
  },
  action: () => {
    try {
      MSL.func();
    } catch(err) {
      console.log(err);
    }
  }
};